(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{HRdN:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"default",(function(){return h}));var r=n("pn0g"),o=n("qPxQ");n("kB5k");function s(e){return t.from(e.startsWith("0x")?e.slice(2):e,"hex")}function i(t){return t?s(t):null}const a=t=>t&&27264===t.statusCode?new o.a("Please enable Contract data on the Ethereum app Settings"):t;class h{constructor(t,e="w0w"){this.transport=void 0,this.transport=t,t.decorateAppAPIMethods(this,["getAddress","provideERC20TokenInformation","signTransaction","signPersonalMessage","getAppConfiguration","starkGetPublicKey","starkSignOrder","starkSignTransfer","starkProvideQuantum"],e)}getAddress(e,n,o){let s=Object(r.b)(e),i=t.alloc(1+4*s.length);return i[0]=s.length,s.forEach((t,e)=>{i.writeUInt32BE(t,1+4*e)}),this.transport.send(224,2,n?1:0,o?1:0,i).then(t=>{let e={},n=t[0],r=t[1+n];return e.publicKey=t.slice(1,1+n).toString("hex"),e.address="0x"+t.slice(1+n+1,1+n+1+r).toString("ascii"),o&&(e.chainCode=t.slice(1+n+1+r,1+n+1+r+32).toString("hex")),e})}provideERC20TokenInformation({data:t}){return this.transport.send(224,10,0,0,t).then(()=>!0,t=>{if(t&&27904===t.statusCode)return!1;throw t})}signTransaction(e,n){let o,s=Object(r.b)(e),i=0,h=t.from(n,"hex"),l=[];for(;i!==h.length;){let e=0===i?149-4*s.length:150,n=i+e>h.length?h.length-i:e,r=t.alloc(0===i?1+4*s.length+n:n);0===i?(r[0]=s.length,s.forEach((t,e)=>{r.writeUInt32BE(t,1+4*e)}),h.copy(r,1+4*s.length,i,i+n)):h.copy(r,0,i,i+n),l.push(r),i+=n}return Object(r.a)(l,(t,e)=>this.transport.send(224,4,0===e?0:128,0,t).then(t=>{o=t})).then(()=>{return{v:o.slice(0,1).toString("hex"),r:o.slice(1,33).toString("hex"),s:o.slice(33,65).toString("hex")}},t=>{throw a(t)})}getAppConfiguration(){return this.transport.send(224,6,0,0).then(t=>{let e={};return e.arbitraryDataEnabled=1&t[0],e.erc20ProvisioningNecessary=2&t[0],e.starkEnabled=4&t[0],e.version=t[1]+"."+t[2]+"."+t[3],e})}signPersonalMessage(e,n){let o,s=Object(r.b)(e),i=0,a=t.from(n,"hex"),h=[];for(;i!==a.length;){let e=0===i?149-4*s.length-4:150,n=i+e>a.length?a.length-i:e,r=t.alloc(0===i?1+4*s.length+4+n:n);0===i?(r[0]=s.length,s.forEach((t,e)=>{r.writeUInt32BE(t,1+4*e)}),r.writeUInt32BE(a.length,1+4*s.length),a.copy(r,1+4*s.length+4,i,i+n)):a.copy(r,0,i,i+n),h.push(r),i+=n}return Object(r.a)(h,(t,e)=>this.transport.send(224,8,0===e?0:128,0,t).then(t=>{o=t})).then(()=>{return{v:o[0],r:o.slice(1,33).toString("hex"),s:o.slice(33,65).toString("hex")}})}starkGetPublicKey(e,n){let o=Object(r.b)(e),s=t.alloc(1+4*o.length);return s[0]=o.length,o.forEach((t,e)=>{s.writeUInt32BE(t,1+4*e)}),this.transport.send(240,2,n?1:0,0,s).then(t=>t.slice(0,t.length-2))}starkSignOrder(e,n,o,s,a,h,l,c,g,u,p){const d=i(n),f=i(s);let S=Object(r.b)(e),w=t.alloc(1+4*S.length+20+32+20+32+4+4+8+8+4+4,0),E=0;return w[0]=S.length,S.forEach((t,e)=>{w.writeUInt32BE(t,1+4*e)}),E=1+4*S.length,d&&d.copy(w,E),E+=20,t.from(o.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,f&&f.copy(w,E),E+=20,t.from(a.toString(16).padStart(64,"0"),"hex").copy(w,E),E+=32,w.writeUInt32BE(h,E),E+=4,w.writeUInt32BE(l,E),E+=4,t.from(c.toString(16).padStart(16,"0"),"hex").copy(w,E),E+=8,t.from(g.toString(16).padStart(16,"0"),"hex").copy(w,E),E+=8,w.writeUInt32BE(u,E),E+=4,w.writeUInt32BE(p,E),this.transport.send(240,4,1,0,w).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkSignTransfer(e,n,o,a,h,l,c,g,u){const p=i(n),d=s(a);let f=Object(r.b)(e),S=t.alloc(1+4*f.length+20+32+32+4+4+8+4+4,0),w=0;return S[0]=f.length,f.forEach((t,e)=>{S.writeUInt32BE(t,1+4*e)}),w=1+4*f.length,p&&p.copy(S,w),w+=20,t.from(o.toString(16).padStart(64,"0"),"hex").copy(S,w),w+=32,d.copy(S,w),w+=32,S.writeUInt32BE(h,w),w+=4,S.writeUInt32BE(l,w),w+=4,t.from(c.toString(16).padStart(16,"0"),"hex").copy(S,w),w+=8,S.writeUInt32BE(g,w),w+=4,S.writeUInt32BE(u,w),this.transport.send(240,4,2,0,S).then(t=>{return{r:t.slice(1,33).toString("hex"),s:t.slice(33,65).toString("hex")}})}starkProvideQuantum(e,n){const r=i(e);let o=t.alloc(52,0);return r&&r.copy(o,0),t.from(n.toString(16).padStart(64,"0"),"hex").copy(o,20),this.transport.send(240,8,0,0,o).then(()=>!0,t=>{if(t&&27904===t.statusCode)return!1;throw t})}}}.call(this,n("tjlA").Buffer)},pn0g:function(t,e,n){"use strict";function r(t){let e=[];return t.split("/").forEach(t=>{let n=parseInt(t,10);isNaN(n)||(t.length>1&&"'"===t[t.length-1]&&(n+=2147483648),e.push(n))}),e}function o(t,e){return Promise.resolve().then(()=>(function t(n,r,o){return n>=r.length?o:e(r[n],n).then((function(e){return o.push(e),t(n+1,r,o)}))})(0,t,[]))}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))}}]);